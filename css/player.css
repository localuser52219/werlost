*,
*::before,
*::after{box-sizing:border-box}
html,body{margin:0;padding:0;height:100%;
font-family:system-ui,-apple-system,BlinkMacSystemFont,
"Segoe UI","PingFang TC","Microsoft JhengHei",sans-serif;
background:radial-gradient(circle at top,#1a2236 0,#050912 60%,#000 100%);
color:#f0f0f0}

.player-page{max-width:1200px;margin:0 auto;
min-height:100vh;padding:16px 20px 40px;
display:flex;flex-direction:column}

.top-bar{display:flex;justify-content:space-between;
align-items:flex-end;gap:12px;padding-bottom:12px;
margin-bottom:20px;border-bottom:1px solid rgba(255,255,255,.14)}

.app-title{margin:0;font-size:24px;letter-spacing:.08em}
.app-subtitle{margin:6px 0 0;font-size:13px;color:rgba(255,255,255,.7)}

.top-bar-right{display:flex;gap:10px;flex-wrap:wrap;align-items:flex-end}
.field{display:flex;flex-direction:column;font-size:12px;gap:4px}
.field-label{color:rgba(255,255,255,.75)}

.input{padding:6px 8px;min-width:80px;border-radius:6px;
border:1px solid rgba(255,255,255,.24);
background:rgba(10,14,22,.92);color:#f5f5f5;font-size:13px}
.input::placeholder{color:rgba(255,255,255,.4)}
.status-text{min-width:120px;text-align:right;font-size:12px;color:#8be9ff}

.btn{padding:8px 14px;border-radius:8px;
border:1px solid rgba(148,163,184,.7);
background:rgba(15,23,42,.95);color:#dce3ef;cursor:pointer;
font-size:14px;transition:background .15s,transform .1s}
.btn:hover{background:rgba(37,99,235,.9);
box-shadow:0 0 12px rgba(59,130,246,.8);
transform:translateY(-1px)}
.btn.primary{background:linear-gradient(135deg,#2563eb,#7c3aed);
border-color:rgba(99,102,241,.9);color:#fff}

.content{flex:1;display:flex;flex-direction:column;gap:24px}
.section-title{margin:0 0 10px;font-size:16px;letter-spacing:.12em;color:rgba(255,255,255,.9)}

.intersection{
  position:relative;
  width:min(90vw,520px);
  aspect-ratio:1/1;
  margin:0 auto;
  border-radius:24px;
  background:radial-gradient(circle at 40% 15%,#1f2937 0,#020617 55%,#000 100%);
  box-shadow:0 20px 40px rgba(15,23,42,.9);
  overflow:hidden;
}

.street-floor{
  position:absolute;
  inset:42% 0 0;
  background:radial-gradient(circle at 50% 100%,#111827 0,#020617 60%);
  clip-path:polygon(14% 100%,86% 100%,60% 40%,40% 40%);
}

/* 建築與店舖視角 ----------------------------------- */

.building{position:absolute;inset:0;pointer-events:none}

.building-left .block-far{
  position:absolute;top:18%;left:34%;width:22%;height:20%;
}
.building-left .block-near{
  position:absolute;top:46%;left:10%;width:32%;height:26%;
}
.building-right .block-far{
  position:absolute;top:18%;right:34%;width:22%;height:20%;
}
.building-right .block-near{
  position:absolute;top:46%;right:10%;width:32%;height:26%;
}

/* 店名卡本體：保持矩形，不做梯形變形 */

.block-inner{
  position:absolute;inset:0;
  padding:6px 8px;
  border-radius:8px;
  background:rgba(15,23,42,.96);
  border:1px solid rgba(148,163,184,.9);
  box-shadow:0 10px 18px rgba(0,0,0,.9);
  display:flex;
  flex-direction:column;
  justify-content:center;
  overflow:hidden;
  z-index:1;
}

/* 牆面與屋頂：用 before/after 製造平行四邊形與消失點 */

.block{position:absolute}

.block::before{
  content:"";
  position:absolute;
  left:-40%;right:-40%;bottom:-55%;height:120%;
  background:linear-gradient(135deg,rgba(15,23,42,.9),rgba(3,7,18,1));
  opacity:.9;
  z-index:0;
}

.building-left .block::before{
  clip-path:polygon(0 100%,100% 100%,75% 0,25% 0);
}
.building-right .block::before{
  clip-path:polygon(25% 0,75% 0,100% 100%,0 100%);
}

.block::after{
  content:"";
  position:absolute;
  left:-30%;right:-30%;top:-45%;height:55%;
  background:linear-gradient(135deg,rgba(148,163,184,.95),rgba(55,65,81,.9));
  opacity:.9;
  z-index:0;
}

/* 店舖文字：限制兩行，避免出界 */

.shop-label{
  font-size:11px;
  color:rgba(203,213,225,.9);
  letter-spacing:.14em;
}

.shop-name{
  margin-top:2px;
  font-size:14px;
  font-weight:600;
  color:#f9fafb;
  line-height:1.25;
  word-break:break-all;
  max-height:2.6em;
  overflow:hidden;
  display:-webkit-box;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
}

.building-left .block-far .shop-name,
.building-right .block-far .shop-name{
  font-size:12px;
}

/* 玩家所在路口與控制區 ---------------------------- */

.you-are-here{
  position:absolute;
  left:50%;bottom:6%;
  transform:translateX(-50%);
  padding:8px 10px;
  border-radius:999px;
  background:radial-gradient(circle at top,#f97316 0,#ea580c 40%,#7c2d12 100%);
  box-shadow:0 0 16px rgba(249,115,22,.9);
  text-align:center;
  min-width:140px;
}

.here-label{
  font-size:11px;
  letter-spacing:.16em;
  color:#fff6e7;
}
.here-name{
  font-size:13px;
  font-weight:600;
  margin-top:2px;
}

.controls-section{
  padding:14px;
  border-radius:16px;
  background:linear-gradient(135deg,rgba(15,23,42,.95),rgba(37,99,235,.4));
  box-shadow:0 14px 26px rgba(10,13,20,.9);
}
.controls-row{
  display:flex;
  justify-content:center;
  gap:20px;
  margin-top:6px;
  flex-wrap:wrap;
}
.hint-text{
  margin-top:10px;
  font-size:12px;
  text-align:center;
  color:rgba(210,220,235,.85);
}

/* RWD ---------------------------------------------- */

@media (max-width:768px){
  .intersection{width:min(92vw,460px)}
  .building-left .block-near,
  .building-right .block-near{width:36%}
  .building-left .block-far,
  .building-right .block-far{width:24%}
}
