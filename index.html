<head>
  <meta charset="UTF-8" />
  <title>迷路通信：玩家端</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <link rel="stylesheet" href="css/player.css" />

<!-- 1. 載入 supabase-js（一定要最先）-->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<!-- 2. 初始化 Supabase client（使用 anon key） -->
<script src="js/supabaseClient.js"></script>

<!-- 3. 其它需要 supabase 的腳本 -->
<script src="js/shopName.js"></script>
<script src="js/player.js"></script>
</head>

  <body>
    <div class="player-page">
      <!-- 上方：房間／角色／狀態 -->
      <header class="top-bar">
        <div class="top-bar-left">
          <h1 class="app-title">迷路通信 · 玩家端</h1>
          <p class="app-subtitle">你只看得到路口前方的街景</p>
        </div>
        <div class="top-bar-right">
          <label class="field">
            <span class="field-label">房間代碼</span>
            <input
              id="roomCode"
              type="text"
              placeholder="例如：AB12"
              class="input"
            />
          </label>
          <label class="field">
            <span class="field-label">角色</span>
            <select id="role" class="input">
              <option value="A">玩家 A</option>
              <option value="B">玩家 B</option>
            </select>
          </label>
          <button id="joinBtn" class="btn primary">加入房間</button>
          <div id="status" class="status-text">尚未連線</div>
        </div>
      </header>

      <main class="content">
        <!-- 中間：路口視角 -->
<section class="view-section">
  <h2 class="section-title">目前街口視野</h2>
  <div class="intersection">
    <!-- 中央街道地面 -->
    <div class="street-floor"></div>

    <!-- 左側轉角樓 -->
    <div class="building building-left">
      <!-- 左前遠：上方花店 -->
      <div class="block block-far">
        <div class="block-inner">
          <div class="shop-label">左前遠</div>
          <div class="shop-name" id="leftFar">—</div>
        </div>
      </div>
      <!-- 左前近：下方食店 -->
      <div class="block block-near">
        <div class="block-inner">
          <div class="shop-label">左前近</div>
          <div class="shop-name" id="leftNear">—</div>
        </div>
      </div>
    </div>

    <!-- 右側轉角樓 -->
    <div class="building building-right">
      <!-- 右前遠：上方花店 -->
      <div class="block block-far">
        <div class="block-inner">
          <div class="shop-label">右前遠</div>
          <div class="shop-name" id="rightFar">—</div>
        </div>
      </div>
      <!-- 右前近：下方食店 -->
      <div class="block block-near">
        <div class="block-inner">
          <div class="shop-label">右前近</div>
          <div class="shop-name" id="rightNear">—</div>
        </div>
      </div>
    </div>

    <!-- 玩家所在路口 -->
    <div class="you-are-here">
      <div class="here-label">你在這個路口</div>
      <div class="here-name" id="hereShop">交叉路口</div>
    </div>
  </div>
</section>


        <!-- 下方：操作按鈕 -->
        <section class="controls-section">
          <h2 class="section-title">行動</h2>
          <div class="controls-row">
            <button id="turnLeft" class="btn">
              ⟲ 左轉
            </button>
            <button id="moveForward" class="btn primary">
              ↑ 向前走
            </button>
            <button id="turnRight" class="btn">
              右轉 ⟳
            </button>
          </div>
          <p class="hint-text">
            規則提示：你只看得到眼前四個街角和自己所在的路口。<br />
            請用語音或電話形容店舖名稱和相對位置，嘗試與對方會合。
          </p>
        </section>
      </main>
    </div>

<script src="js/supabaseClient.js"></script>
<script src="js/shopName.js"></script>
<script src="js/player.js"></script>

  </body>
</html>
